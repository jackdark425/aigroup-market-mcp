# ğŸ¤– AIGroup Market MCP Server

[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-yellow.svg)](https://www.javascript.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)

> ğŸš€ åŸºäº Tushare å’Œç™¾åº¦æ–°é—»çš„ä¸“ä¸šé‡‘èæ•°æ® MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡å™¨ï¼Œæä¾›å…¨é¢çš„é‡‘èå¸‚åœºæ•°æ®æŸ¥è¯¢æœåŠ¡ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…ä¿¡æ¯

**ä½œè€…**: Jackdark425@gmail.com
**ç ”ç©¶å›¢é˜Ÿ**: AIGroup
**é¡¹ç›®å®šä½**: ä¸“ä¸šçš„é‡‘èæ•°æ®æœåŠ¡å¹³å°ï¼Œä¸“æ³¨äºä¸ºAIåº”ç”¨æä¾›å®æ—¶ã€å‡†ç¡®çš„é‡‘èå¸‚åœºæ•°æ®

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

AIGroup Market MCP Server æ˜¯ä¸€ä¸ªä¸“ä¸ºé‡‘èæ•°æ®åˆ†ææ‰“é€ çš„ MCP æœåŠ¡å™¨ï¼Œé›†æˆäº†å¤šä¸ªä¸“ä¸šæ•°æ®æºï¼Œä¸ºç”¨æˆ·æä¾›å®æ—¶ã€å‡†ç¡®çš„é‡‘èå¸‚åœºæ•°æ®ã€‚é€šè¿‡æ ‡å‡†åŒ–æ¥å£ï¼Œæ”¯æŒè‚¡ç¥¨ã€åŸºé‡‘ã€å®è§‚ç»æµã€æ–°é—»èµ„è®¯ç­‰å¤šç§é‡‘èæ•°æ®çš„æŸ¥è¯¢å’Œåˆ†æã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ å¤šæ•°æ®æºé›†æˆ
- **Tushare API**: ä¸“ä¸šçš„é‡‘èæ•°æ®æœåŠ¡å¹³å°ï¼Œæä¾›è‚¡ç¥¨ã€åŸºé‡‘ã€å®è§‚ç»æµç­‰æƒå¨æ•°æ®
- **ç™¾åº¦æ–°é—»çˆ¬è™«**: å®æ—¶æŠ“å–è´¢ç»æ–°é—»èµ„è®¯ï¼Œç¡®ä¿ä¿¡æ¯æ—¶æ•ˆæ€§
- **å¤šå¸‚åœºæ”¯æŒ**: Aè‚¡ã€ç¾è‚¡ã€æ¸¯è‚¡ã€åŠ å¯†è´§å¸ã€å¤–æ±‡ã€æœŸè´§ç­‰å…¨å¸‚åœºè¦†ç›–

### ğŸ› ï¸ ä¸°å¯ŒåŠŸèƒ½æ¨¡å—
- ğŸ“ˆ **è‚¡ç¥¨è¡Œæƒ…æ•°æ®**: æ—¥Kçº¿ã€åˆ†é’ŸKçº¿ï¼Œæ”¯æŒæŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- ğŸ¢ **å…¬å¸è´¢åŠ¡æ•°æ®**: èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨ç­‰å®Œæ•´è´¢åŠ¡ä¿¡æ¯
- ğŸ’° **åŸºé‡‘æ•°æ®**: åŸºé‡‘å‡€å€¼ã€æŒä»“ä¿¡æ¯ã€åŸºé‡‘ç»ç†è¯¦æƒ…
- ğŸ“° **æ–°é—»èµ„è®¯**: è´¢ç»æ–°é—»ã€7Ã—24å°æ—¶çƒ­ç‚¹æ–°é—»
- ğŸ“Š **å®è§‚ç»æµ**: CPIã€GDPã€è´§å¸æ”¿ç­–ç­‰å®è§‚ç»æµæŒ‡æ ‡
- ğŸ’¸ **å¸‚åœºäº¤æ˜“**: å¤§å®—äº¤æ˜“ã€èµ„é‡‘æµå‘ã€èèµ„èåˆ¸æ•°æ®
- ğŸ›ï¸ **æŒ‡æ•°æ•°æ®**: æ²ªæ·±300ã€ä¸Šè¯æŒ‡æ•°ç­‰å¸‚åœºæŒ‡æ•°ä¿¡æ¯

### âš¡ æŠ€æœ¯ä¼˜åŠ¿
- **å®æ—¶æ•°æ®æ›´æ–°**: æ¯«ç§’çº§æ•°æ®è·å–å’Œå¤„ç†
- **æŠ€æœ¯æŒ‡æ ‡è®¡ç®—**: å†…ç½®MACDã€RSIã€KDJã€å¸ƒæ—å¸¦ç­‰ä¸“ä¸šæŒ‡æ ‡
- **çµæ´»è¾“å‡ºæ ¼å¼**: æ”¯æŒ Markdownã€CSVã€JSONç­‰å¤šç§æ ¼å¼
- **æ™ºèƒ½ç¼“å­˜æœºåˆ¶**: é«˜æ•ˆçš„æ•°æ®ç¼“å­˜ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½
- **é”™è¯¯å¤„ç†å®Œå–„**: å…¨é¢çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ¢å¤æœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **npm**: >= 8.0.0
- **Tushare Token**: éœ€è¦æœ‰æ•ˆçš„ Tushare API ä»¤ç‰Œ

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd aigroup-market-mcp
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **ç¯å¢ƒé…ç½®**

   å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
   ```bash
   cp .env.example .env
   ```

   ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„é…ç½®ï¼š
   ```env
   # Tushare API é…ç½®
   TUSHARE_TOKEN=your_tushare_token_here
   TUSHARE_API_URL=https://api.tushare.pro

   # æœåŠ¡å™¨é…ç½®
   PORT=3000
   NODE_ENV=development
   ```

4. **æ„å»ºé¡¹ç›®**
   ```bash
   npm run build
   ```

5. **å¯åŠ¨æœåŠ¡**
   ```bash
   # å¼€å‘æ¨¡å¼
   npm run dev

   # ç”Ÿäº§æ¨¡å¼
   npm start
   ```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### MCP æœåŠ¡å™¨é…ç½®ï¼ˆRooCodeï¼‰

åœ¨ä½ çš„ RooCode MCP å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼ˆ`.roo/mcp.json`ï¼‰ä¸­æ·»åŠ æœåŠ¡å™¨é…ç½®ï¼š

```json
{
  "mcpServers": {
    "aigroup-market-mcp": {
      "command": "npx",
      "args": [
        "aigroup-market-mcp"
      ],
      "cwd": "d:/aigroup-market-mcp",
      "env": {
        "TUSHARE_TOKEN": "your_tushare_token_here"
      },
      "alwaysAllow": [
        "current_timestamp",
        "finance_news",
        "stock_data",
        "stock_data_minutes",
        "index_data",
        "macro_econ",
        "company_performance",
        "fund_data",
        "fund_manager_by_name",
        "convertible_bond",
        "block_trade",
        "money_flow",
        "margin_trade",
        "company_performance_us",
        "csi_index_constituents",
        "dragon_tiger_inst",
        "hot_news_7x24"
      ]
    }
  }
}
```</search_and_replace>

### å·¥å…·ä½¿ç”¨ç¤ºä¾‹

#### ğŸ• è·å–å½“å‰æ—¶é—´æˆ³

```typescript
// æŸ¥è¯¢ä¸œå…«åŒºæ—¶é—´
{
  "tool": "current_timestamp",
  "arguments": {
    "format": "datetime"
  }
}

// è¿”å›ç¤ºä¾‹:
// ## ğŸ• å½“å‰ä¸œå…«åŒºæ—¶é—´
// æ ¼å¼: datetime
// æ—¶é—´: 2025-10-18 14:30:25
// æ—¶åŒº: ä¸œå…«åŒº (UTC+8)
// æ˜ŸæœŸ: æ˜ŸæœŸå…­
```

#### ğŸ“ˆ æŸ¥è¯¢è‚¡ç¥¨æ•°æ®

```typescript
// æŸ¥è¯¢è‚¡ç¥¨è¡Œæƒ…ï¼ˆæ”¯æŒæŠ€æœ¯æŒ‡æ ‡ï¼‰
{
  "tool": "stock_data",
  "arguments": {
    "code": "000001.SZ",
    "market_type": "cn",
    "start_date": "20241015",
    "end_date": "20241017",
    "indicators": "macd(12,26,9) rsi(14)"
  }
}
```

#### ğŸ“° æœç´¢è´¢ç»æ–°é—»

```typescript
// æœç´¢ç‰¹å®šå…³é”®è¯æ–°é—»
{
  "tool": "finance_news",
  "arguments": {
    "query": "è…¾è®¯ è‚¡ç¥¨"
  }
}
```

#### ğŸ¢ æŸ¥è¯¢å…¬å¸è´¢åŠ¡æ•°æ®

```typescript
// æŸ¥è¯¢å…¬å¸è´¢åŠ¡æŒ‡æ ‡
{
  "tool": "company_performance",
  "arguments": {
    "ts_code": "000001.SZ",
    "data_type": "indicators",
    "start_date": "20240901",
    "end_date": "20241017"
  }
}
```

## ğŸ› ï¸ å·¥å…·æ¸…å•

| å·¥å…·åç§° | åŠŸèƒ½æè¿° | æ•°æ®æ¥æº |
|---------|---------|---------|
| `current_timestamp` | è·å–å½“å‰ä¸œå…«åŒºæ—¶é—´æˆ³ | ç³»ç»Ÿç”Ÿæˆ |
| `finance_news` | è´¢ç»åª’ä½“æ–°é—»æœç´¢ | ç™¾åº¦æ–°é—»çˆ¬è™« |
| `stock_data` | è‚¡ç¥¨å†å²è¡Œæƒ…æ•°æ® | Tushare |
| `stock_data_minutes` | åˆ†é’ŸKçº¿æ•°æ® | Tushare |
| `index_data` | è‚¡ç¥¨æŒ‡æ•°æ•°æ® | Tushare |
| `macro_econ` | å®è§‚ç»æµæ•°æ® | Tushare |
| `company_performance` | Aè‚¡å…¬å¸ç»¼åˆè¡¨ç°æ•°æ® | Tushare |
| `fund_data` | å…¬å‹ŸåŸºé‡‘æ•°æ® | Tushare |
| `fund_manager_by_name` | åŸºé‡‘ç»ç†ä¿¡æ¯æŸ¥è¯¢ | Tushare |
| `convertible_bond` | å¯è½¬å€ºæ•°æ® | Tushare |
| `block_trade` | å¤§å®—äº¤æ˜“æ•°æ® | Tushare |
| `money_flow` | èµ„é‡‘æµå‘æ•°æ® | Tushare |
| `margin_trade` | èèµ„èåˆ¸æ•°æ® | Tushare |
| `company_performance_us` | ç¾è‚¡å…¬å¸ä¸šç»©æ•°æ® | Tushare |
| `csi_index_constituents` | ä¸­è¯æŒ‡æ•°æˆåˆ†è‚¡æ•°æ® | Tushare |
| `dragon_tiger_inst` | é¾™è™æ¦œæœºæ„æˆäº¤æ˜ç»† | Tushare |
| `hot_news_7x24` | 7Ã—24çƒ­ç‚¹æ–°é—» | Tushare |

## ğŸ“Š æ•°æ®æºè¯´æ˜

### Tushare æ•°æ®æº

Tushare æ˜¯ä¸“ä¸šçš„é‡‘èæ•°æ®æœåŠ¡å¹³å°ï¼Œæä¾›ä»¥ä¸‹ç±»å‹æ•°æ®ï¼š

- **è‚¡ç¥¨æ•°æ®**: Aè‚¡ã€ç¾è‚¡ã€æ¸¯è‚¡æ—¥Kçº¿ã€åˆ†é’ŸKçº¿
- **è´¢åŠ¡æ•°æ®**: èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨ã€è´¢åŠ¡æŒ‡æ ‡
- **åŸºé‡‘æ•°æ®**: åŸºé‡‘å‡€å€¼ã€æŒä»“ä¿¡æ¯ã€åŸºé‡‘ç»ç†ä¿¡æ¯
- **å®è§‚ç»æµ**: CPIã€PPIã€GDPã€è´§å¸æ”¿ç­–ç­‰
- **å¸‚åœºæ•°æ®**: å¤§å®—äº¤æ˜“ã€èµ„é‡‘æµå‘ã€èèµ„èåˆ¸
- **æŒ‡æ•°æ•°æ®**: æ²ªæ·±300ã€ä¸Šè¯æŒ‡æ•°ç­‰å¸‚åœºæŒ‡æ•°

### ç™¾åº¦æ–°é—»çˆ¬è™«

è‡ªä¸»ç ”å‘çš„ç™¾åº¦æ–°é—»çˆ¬è™«ç³»ç»Ÿï¼š

- **å®æ—¶æŠ“å–**: å®æ—¶æŠ“å–ç™¾åº¦æ–°é—»æœç´¢ç»“æœ
- **æ™ºèƒ½è§£æ**: è‡ªåŠ¨è§£ææ–°é—»æ ‡é¢˜ã€æ‘˜è¦ã€å‘å¸ƒæ—¶é—´ã€æ¥æº
- **å…³é”®è¯åŒ¹é…**: æ”¯æŒå¤šå…³é”®è¯ç»„åˆæœç´¢
- **å»é‡æœºåˆ¶**: æ™ºèƒ½å»é‡ï¼Œé¿å…é‡å¤å†…å®¹

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
aigroup-market-mcp/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ core/                 # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ToolManager.ts       # å·¥å…·ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ toolRegistry.ts      # å·¥å…·æ³¨å†Œä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ errors.ts            # é”™è¯¯å¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ tools/                # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ stockData/           # è‚¡ç¥¨æ•°æ®å·¥å…·é›†
â”‚   â”‚   â”œâ”€â”€ companyPerformanceDetail/  # è´¢åŠ¡è¯¦æƒ…å·¥å…·
â”‚   â”‚   â”œâ”€â”€ crawler/             # æ–°é—»çˆ¬è™«æ¨¡å—
â”‚   â”‚   â””â”€â”€ *.ts                 # å„ä¸ªå·¥å…·æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ ğŸ“ config.ts             # é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ .roo/                     # MCPé…ç½®
â”œâ”€â”€ ğŸ“ docs/                     # æ–‡æ¡£
â”œâ”€â”€ ğŸ“ exports/                 # æ•°æ®å¯¼å‡ºç›®å½•
â””â”€â”€ ğŸ“ csv_exports/             # CSVå¯¼å‡ºç›®å½•
```

### æ¶æ„ç‰¹ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªå·¥å…·éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
2. **ç»Ÿä¸€æ¥å£**: æ‰€æœ‰å·¥å…·éƒ½ç»§æ‰¿ `BaseTool` ç±»ï¼Œç¡®ä¿æ¥å£ä¸€è‡´æ€§
3. **ä¾èµ–æ³¨å…¥**: é€šè¿‡ `ToolManager` ç»Ÿä¸€ç®¡ç†å·¥å…·æ³¨å†Œå’Œè°ƒç”¨
4. **é”™è¯¯éš”ç¦»**: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿æœåŠ¡ç¨³å®šæ€§

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. **åˆ›å»ºå·¥å…·ç±»**
   ```typescript
   import { BaseTool } from '../core/ToolManager.js';

   export class NewTool extends BaseTool {
     readonly name = 'new_tool';
     readonly description = 'æ–°å·¥å…·æè¿°';
     readonly parameters = {
       type: 'object',
       properties: {
         param1: { type: 'string', description: 'å‚æ•°è¯´æ˜' }
       },
       required: ['param1']
     };

     async execute(args: any) {
       // å·¥å…·å®ç°é€»è¾‘
       return { content: [{ type: 'text', text: 'æ‰§è¡Œç»“æœ' }] };
     }
   }
   ```

2. **æ³¨å†Œå·¥å…·**
   åœ¨ `src/core/toolRegistry.ts` ä¸­æ³¨å†Œæ–°å·¥å…·ï¼š
   ```typescript
   import { NewTool } from '../tools/NewTool.js';

   export function registerAllTools(manager: ToolManager): void {
     // æ³¨å†Œæ–°å·¥å…·
     manager.registerTool(new NewTool());
   }
   ```

3. **æ›´æ–°MCPé…ç½®**
   åœ¨ `.roo/mcp.json` çš„ `alwaysAllow` æ•°ç»„ä¸­æ·»åŠ æ–°å·¥å…·åç§°ã€‚

### è°ƒè¯•æŠ€å·§

- ä½¿ç”¨ `npm run dev` å¯åŠ¨å¼€å‘æ¨¡å¼ï¼Œæ”¯æŒçƒ­é‡è½½
- æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œäº†è§£å·¥å…·æ‰§è¡Œè¿‡ç¨‹
- ä½¿ç”¨ç¯å¢ƒå˜é‡ `DEBUG=true` å¯ç”¨è¯¦ç»†æ—¥å¿—
- é€šè¿‡ `ToolManager` çš„ `getToolCount()` æ–¹æ³•æ£€æŸ¥å·¥å…·æ³¨å†ŒçŠ¶æ€

## ğŸ“ æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](CHANGELOG.md) è·å–è¯¦ç»†çš„ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼åœ¨è´¡çŒ®ä»£ç å‰ï¼Œè¯·ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- **Tushare**: ä¼˜ç§€çš„é‡‘èæ•°æ®æœåŠ¡å¹³å°
- **ç™¾åº¦æ–°é—»**: ä¸°å¯Œçš„æ–°é—»èµ„è®¯æ¥æº
- **MCP ç¤¾åŒº**: ä¸ºè·¨å¹³å°å·¥å…·é›†æˆæä¾›çš„ä¼˜ç§€åè®®

---

ğŸ’¡ **æç¤º**: å¦‚éœ€è·å– Tushare API ä»¤ç‰Œï¼Œè¯·è®¿é—® [https://tushare.pro](https://tushare.pro) æ³¨å†Œå¹¶ç”³è¯·å…è´¹é¢åº¦ã€‚

ğŸ“§ **è”ç³»æˆ‘ä»¬**: æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ Issue æˆ–è€…é‚®ä»¶è”ç³»æˆ‘ä»¬ï¼ˆä½œè€…é‚®ç®±ï¼šJackdark425@gmail.comï¼‰ã€‚